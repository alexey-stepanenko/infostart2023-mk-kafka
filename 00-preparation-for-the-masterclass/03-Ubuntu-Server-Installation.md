# Установка Ubuntu Server
## Установочный образ
* Страница с дистрибутивом: https://ubuntu.com/download/server
* Скачиваем версию 22.04 LTS
* Прямая ссылка на зеркало Yandex: https://mirror.yandex.ru/ubuntu-releases/22.04.3/ubuntu-22.04.3-live-server-amd64.iso

## Создание виртуальной машины

В **VirtualBox** создаем новую виртуальную машину (Меню *Машина* **->** *Создать* или **Ctrl-N**):
![Общие параметры виртуальной машины](img/03-0001.png)
<table>
    <tr>
        <th>Параметр</th>
        <th>Значение</th>
    </tr><tr>
        <td>Имя</td>
        <td>Kafka</td>
    </tr><tr>
        <td>Образ ISO</td>
        <td><ничего не выбрано></td>
    </tr><tr>
        <td>Тип</td>
        <td>Linux</td>
    </tr><tr>
        <td>Версия</td>
        <td>Ubuntu 22.04 LTS (Jammy Jellyfish) (64-bit)</td>
    </tr>
</table>

![Процессор и память виртуальной машины](img/03-0002.png)
<table>
    <tr>
        <th>Параметр</th>
        <th>Значение</th>
    </tr><tr>
        <td>Основная память</td>
        <td>2048 МБ</td>
    </tr><tr>
        <td>Процессры</td>
        <td>2</td>
    </tr><tr>
        <td>Включать EFI</td>
        <td>Отключено</td>
    </tr>
</table>

![Диск виртуальной машины](img/03-0003.png)
<table>
    <tr>
        <th>Параметр</th>
        <th>Значение</th>
    </tr><tr>
        <td>Режим</td>
        <td>Создать новый виртуальный жёсткий диск</td>
    </tr><tr>
        <td>Размер диска</td>
        <td>10 ГБ</td>
    </tr><tr>
        <td>Выделить место в полном размере</td>
        <td>Включено</td>
    </tr>
</table>

## Дополнительные настройки виртуальной машины

После создания открываем настройки виртуальной машины (Меню *Машина* **->** *Настроить* или **Ctrl-S**):
![Общие настройки виртуальной машины](img/03-0004.png)

Переключаемся а вкладку **Носители** и подключаем скаченный образ **Ubuntu Server** как виртуальный CD-ROM:
![Носители виртуальной машины](img/03-0005.gif)

Переключаемся а вкладку **Аудио** и отключаем использование аудио на виртуальной машине:
![Аудио виртуальной машины](img/03-0006.png)

Переключаемся а вкладку **Сеть** и проверяем настроки первого сетевого адаптера:
![Настройки сети виртуальной машины](img/03-0007.png)
<table>
    <tr>
        <th>Параметр</th>
        <th>Значение</th>
    </tr><tr>
        <td>Включить сетевой адаптер</td>
        <td>Включено</td>
    </tr><tr>
        <td>Тип подключения</td>
        <td>NAT</td>
    </tr>
</table>

Второй сетевой адаптер:
![Настройки сети виртуальной машины](img/03-0008.png)
<table>
    <tr>
        <th>Параметр</th>
        <th>Значение</th>
    </tr><tr>
        <td>Включить сетевой адаптер</td>
        <td>Включено</td>
    </tr><tr>
        <td>Тип подключения</td>
        <td>Виртуальный адаптер хоста</td>
    </tr><tr>
        <td>Имя</td>
        <td>vboxnet0</td>
    </tr>
</table>

В случае если в разделе [Настройка виртуальной сети](#Настройка-виртуальной-сети) выбрана другая сеть (не **vboxnet0**), то необходимо указать именно ее.

## Установка

Запускаем подготовленную виртуальную машину и выбираем **Try or Install Ubuntu Server**:
![Выбор режима работы LiveCD](img/03-0009.png)

Выбираем язык установки (например, English)
![Выбор языка установки](img/03-0010.png)

При появлении окна с предложением обновления инсталлятора (например, как на показанном примере, предлагается обновить инсталлятор с версии 23.02.1 на 23.04.2) отказываемся, выбрав **Continue without updating**:
![Обновление установщика Ubuntu](img/03-0011.png)

Выбор раскладки клавиатуры:
![Выбор раскладки клавиатуры](img/03-0012.png)

При выборе типа установки выираем **Ubuntu Server (minimized)** (По умолчанию выбрант вариант **Ubuntu Server**):
![Выбор типа установки](img/03-0013.png)

Убеждаемся, что установщик нашел две сетевые карты:
![Сетевые соединения](img/03-0014.png)

Адрес прокси сервера оставляем пустым:
![Настройка прокси](img/03-0015.png)

Адрес сервера-зеркала с пакетами оставляем без изменений:
![Настройка зеркала с архивами](img/03-0016.png)

Разрешаем установщику использовать весь диск и разбить его на разделы по собственному усмотрению (режим **Use an entire disk**):
![Конфигурация дискового хранилища](img/03-0017.png)

Конфигурация хранилища должна выглядеть приблизительным образом:
![Конфигурация дискового хранилища](img/03-0018.png)

Подтверждаем конфигурацию дискового хранилища:
![Подтверждение конфигурации дискового хранилища](img/03-0019.png)

Устанавливаем настройки сервера и пользователя:
![Настройки профиля](img/03-0020.png)
<table>
    <tr>
        <th>Параметр</th>
        <th>Значение</th>
    </tr><tr>
        <td>Your name (Имя пользователя)</td>
        <td>User</td>
    </tr><tr>
        <td>Your server's name (Имя сервер)</td>
        <td>kafka-00</td>
    </tr><tr>
        <td>Pick a username (Логин)</td>
        <td>user</td>
    </tr><tr>
        <td>Choose a password (Пароль)</td>
        <td>pwd</td>
    </tr><tr>
        <td>Confirm your password</td>
        <td>pwd</td>
    </tr>
</table>

**Замечение**: логины **admin**, **adm**, **root**, возможно какие-то другие запрещены. 

Убеждаемся, что выбран режим отказа от обновления до **Ubuntu Pro** (**Skip for now**):
![Обновление до Ubuntu Pro](img/03-0021.png)

Убеждаемся, что установки **OpenSSH сервера** не будет, т.к. позднее установим его вручную:
![Установка SSH](img/03-0022.png)

Отазываемся от установки дополнительных пакетов:
![Популярные пакеты](img/03-0023.png)

После подтверждения выбора на предыдущем экране начинается установка: 
![Лог установки](img/03-0024.png)

Дожидаемся появления кнопки **Reboot Now** и перезагружаемся:
![Окончание установки](img/03-0025.png)

Появляется сообщение об ошибке отключения точки монтирования **/cdrom**:
![Запрос на извлечение носителя](img/03-0026.png)

Закрываем окно с виртуальной машиной и выбираем режим **Выключить машину**:
![Выключение виртуальной машины](img/03-0027.png)

[Оглавление](README.md)